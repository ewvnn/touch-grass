import{_ as Q,r as n,f as h,o as ee,B as ae,c as o,b as a,z as R,A as te,D as se,p as le,t as v,w as oe,h as u,v as y,x as U,g as p,i as c,E as I,n as ie,G as L,F as ne,H as re,I as de,J as w,K as ue,L as ce,e as i,M as ve,N as pe,O as me,P as fe}from"./index-CIopMpJl.js";const be={class:"auth-shell"},ge={class:"container-xl"},he={class:"device-frame rounded-5 shadow-lg mx-auto"},ye={class:"row g-0"},we={class:"col-lg-5 brand-pane text-white"},ke={class:"brand-nav"},xe={class:"brand-center text-center"},_e={class:"brand-title"},Ce={class:"brand-sub"},Se={class:"col-lg-7 form-pane"},Te={class:"form-wrap"},Pe={key:0,class:"field-block"},Ee={class:"input-group input-group-lg has-validation"},Me={class:"invalid-feedback"},qe={class:"field-block"},Ne={class:"input-group input-group-lg has-validation"},Ae={class:"invalid-feedback"},Ve={key:1,class:"field-block"},We={class:"form-label d-flex justify-content-between align-items-center",for:"password"},Re={class:"input-group input-group-lg has-validation"},Ue=["type","autocomplete"],Ie=["aria-pressed","aria-label"],Le={class:"invalid-feedback d-block"},Be={key:0,class:"pw-meter mt-1","aria-live":"polite"},$e={key:2,class:"field-block"},Ze={class:"input-group input-group-lg has-validation"},De=["type"],ze=["aria-pressed","aria-label"],Ge={class:"invalid-feedback"},He={key:3,class:"field-inline"},Oe={class:"form-check"},Fe={key:4,class:"field-block"},Ye={class:"form-check"},je={key:0,class:"text-danger small mt-1"},Je={key:5,class:"alert alert-warning d-flex justify-content-between align-items-center mt-1",role:"alert"},Ke=["disabled"],Xe={key:0,class:"spinner-border spinner-border-sm me-1"},Qe=["disabled"],ea={key:0,class:"spinner-border spinner-border-sm me-2"},aa={key:6,class:"text-center fs-6 mt-2"},ta={key:7,class:"text-center small mt-2"},sa={key:8,class:"text-center fs-6 mt-2"},q=8,la={__name:"Auth",setup(oa){const B=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,$=ue(),Z=ce(),s=n("login"),k=n(""),r=n(""),C=n(""),x=n(""),S=n(!1),T=n(!1),m=n(!1),f=n(!1),_=n(!1),P=n(!1),b=n(!1),d=n({}),N=n(null),M=h(()=>({login:{title:"Welcome back",sub:"Sign in to continue.",cta:"Sign in"},register:{title:"Create your account",sub:"Sign up to get started.",cta:"Create account"},reset:{title:"Reset your password",sub:"We’ll email you a reset link.",cta:"Send reset link"}})[s.value]),D={"auth/invalid-email":"Please enter a valid email.","auth/missing-password":"Enter your password.","auth/weak-password":`Use at least ${q} characters.`,"auth/email-already-in-use":"This email is already registered.","auth/user-not-found":"Incorrect email or password.","auth/wrong-password":"Incorrect email or password.","auth/invalid-credential":"Incorrect email or password.","auth/too-many-requests":"Too many attempts. Try again later.","auth/unverified-email":"Please verify your email before signing in."},A=(t,e)=>D[t]||e||"Something went wrong. Please try again.";function V(){d.value={},P.value=!1}function z(t){let e=0;return t?(t.length>=8&&e++,(/[a-z]/.test(t)||/[A-Z]/.test(t))&&e++,/\d/.test(t)&&e++,/[^A-Za-z0-9]/.test(t)&&e++,Math.max(0,Math.min(4,e))):0}const E=h(()=>z(r.value)),G=h(()=>["Too short","Weak","Okay","Good","Strong"][E.value]),H=h(()=>["pw-weak","pw-weak","pw-ok","pw-good","pw-strong"][E.value]),O=h(()=>[0,25,50,75,100][E.value]+"%"),F=h(()=>["text-danger","text-danger","text-warning","text-success","text-success"][E.value]);function Y(){k.value="",r.value="",C.value="",x.value="",S.value=!1,T.value=!1,m.value=!1,f.value=!1,_.value=!1,b.value=!1,V()}async function g(t){s.value=t,Y(),await re(),N.value?.focus()}function j(){const t={},e=k.value.trim().toLowerCase();return e?B.test(e)||(t.email="Please enter a valid email."):t.email="Email is required.",s.value!=="reset"&&!r.value&&(t.password="Password is required."),s.value==="register"&&(x.value.trim()||(t.displayName="Name is required."),(r.value||"").length<q&&(t.password=`Use at least ${q} characters.`),r.value!==C.value&&(t.confirmPassword="Passwords do not match."),S.value||(t.agree="You must agree to the Terms.")),d.value=t,Object.keys(t).length?null:e}async function J(){V();const t=j();if(t){_.value=!0;try{if(s.value==="login"){await ve(t,r.value,{remember:T.value}),w.success("Welcome back!");const e=(Z.query.redirect||"/").toString();$.replace(e)}else if(s.value==="register")await pe(t,r.value,me(x.value||"").trim()),w.success("Account created! Check your email to verify."),await g("login");else{try{await fe(t)}catch(e){if(e?.code!=="auth/user-not-found")throw e}w.info("If that email exists, a reset link was sent."),await g("login")}}catch(e){e?.code==="auth/unverified-email"?P.value=!0:w.error(A(e.code,e.message))}finally{_.value=!1}}}async function K(){if(!b.value){b.value=!0;try{const t=(k.value||"").trim().toLowerCase();await de(t,r.value),w.success("Verification email resent. Please check your inbox."),P.value=!1}catch(t){w.error(A(t.code,t.message))}finally{b.value=!1}}}function W(){document.body.classList.remove("modal-open"),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"),document.querySelectorAll(".modal-backdrop").forEach(t=>t.remove())}return ee(W),ae(W),(t,e)=>{const X=le("router-link");return i(),o(ne,null,[a("section",be,[a("div",ge,[a("div",he,[a("div",ye,[a("aside",we,[a("div",ke,[te(X,{to:"/",class:"btn-ghost-light"},{default:se(()=>[...e[12]||(e[12]=[a("i",{class:"bi bi-arrow-left me-1"},null,-1),c(" Back home ",-1)])]),_:1})]),a("div",xe,[e[13]||(e[13]=R('<div class="brand-header" data-v-45e4192f><svg class="brand-logo" viewBox="0 0 64 64" aria-hidden="true" data-v-45e4192f><rect x="0" y="44" width="64" height="6" data-v-45e4192f></rect><path d="M8 44 q2-10 6-16 q-2 8 2 16 Z" data-v-45e4192f></path><path d="M16 44 q2-12 8-20 q-3 10 1 20 Z" data-v-45e4192f></path><path d="M24 44 q3-14 10-24 q-4 12 0 24 Z" data-v-45e4192f></path><path d="M32 44 q2-12 8-20 q-3 10 0 20 Z" data-v-45e4192f></path><path d="M40 44 q3-14 10-24 q-4 12 0 24 Z" data-v-45e4192f></path><path d="M48 44 q2-10 6-16 q-2 8 2 16 Z" data-v-45e4192f></path></svg><div class="brand-name" data-v-45e4192f>Touch Grass</div></div><div class="brand-divider" data-v-45e4192f></div>',2)),a("h2",_e,v(M.value.title),1),a("p",Ce,v(M.value.sub),1),e[14]||(e[14]=a("p",{class:"brand-tag"},"Step outside for a minute—fresh air helps.",-1))])]),a("main",Se,[a("div",Te,[(i(),o("form",{onSubmit:oe(J,["prevent"]),class:"form-stack",novalidate:"",key:s.value},[s.value==="register"?(i(),o("div",Pe,[e[16]||(e[16]=a("label",{class:"form-label",for:"displayName"},"Name *",-1)),a("div",Ee,[e[15]||(e[15]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-person"})],-1)),y(a("input",{id:"displayName","onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),type:"text",class:p(["form-control","tg-input",{"is-invalid":d.value.displayName}]),placeholder:"Your name",autocomplete:"name"},null,2),[[U,x.value,void 0,{trim:!0}]]),a("div",Me,v(d.value.displayName),1)])])):u("",!0),a("div",qe,[e[18]||(e[18]=a("label",{class:"form-label",for:"email"},"Email Address *",-1)),a("div",Ne,[e[17]||(e[17]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-envelope"})],-1)),y(a("input",{id:"email",ref_key:"emailEl",ref:N,"onUpdate:modelValue":e[1]||(e[1]=l=>k.value=l),type:"email",class:p(["form-control","tg-input",{"is-invalid":d.value.email}]),placeholder:"you@example.com",autocomplete:"username"},null,2),[[U,k.value,void 0,{trim:!0}]]),a("div",Ae,v(d.value.email),1)])]),s.value!=="reset"?(i(),o("div",Ve,[a("label",We,[e[19]||(e[19]=c(" Password * ",-1)),s.value==="register"&&r.value?(i(),o("small",{key:0,class:p(["fw-semibold",F.value])}," Strength: "+v(G.value),3)):u("",!0)]),a("div",Re,[e[20]||(e[20]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-lock"})],-1)),y(a("input",{id:"password",type:m.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=l=>r.value=l),class:p(["form-control","tg-input",{"is-invalid":d.value.password}]),autocomplete:s.value==="register"?"new-password":"current-password",placeholder:"Enter password"},null,10,Ue),[[I,r.value]]),a("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[3]||(e[3]=l=>m.value=!m.value),"aria-pressed":m.value,"aria-label":m.value?"Hide password":"Show password"},[a("i",{class:p(["bi",m.value?"bi-eye-slash":"bi-eye"])},null,2)],8,Ie),a("div",Le,v(d.value.password),1)]),s.value==="register"&&r.value?(i(),o("div",Be,[a("div",{class:p(["pw-bar",H.value]),style:ie({width:O.value})},null,6)])):u("",!0)])):u("",!0),s.value==="register"?(i(),o("div",$e,[e[22]||(e[22]=a("label",{class:"form-label",for:"confirm"},"Confirm Password *",-1)),a("div",Ze,[e[21]||(e[21]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-shield-lock"})],-1)),y(a("input",{id:"confirm",type:f.value?"text":"password","onUpdate:modelValue":e[4]||(e[4]=l=>C.value=l),class:p(["form-control","tg-input",{"is-invalid":d.value.confirmPassword}]),placeholder:"Re-enter password",autocomplete:"new-password"},null,10,De),[[I,C.value]]),a("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[5]||(e[5]=l=>f.value=!f.value),"aria-pressed":f.value,"aria-label":f.value?"Hide confirm password":"Show confirm password"},[a("i",{class:p(["bi",f.value?"bi-eye-slash":"bi-eye"])},null,2)],8,ze),a("div",Ge,v(d.value.confirmPassword),1)])])):u("",!0),s.value==="login"?(i(),o("div",He,[a("div",Oe,[y(a("input",{class:"form-check-input",type:"checkbox",id:"remember","onUpdate:modelValue":e[6]||(e[6]=l=>T.value=l)},null,512),[[L,T.value]]),e[23]||(e[23]=a("label",{class:"form-check-label",for:"remember"},"Remember me",-1))]),a("button",{class:"btn btn-link p-0 small link-deep",type:"button",onClick:e[7]||(e[7]=l=>g("reset"))}," Forgot password? ")])):u("",!0),s.value==="register"?(i(),o("div",Fe,[a("div",Ye,[y(a("input",{class:"form-check-input",type:"checkbox",id:"agree","onUpdate:modelValue":e[8]||(e[8]=l=>S.value=l)},null,512),[[L,S.value]]),e[24]||(e[24]=a("label",{class:"form-check-label",for:"agree"},[c(" I agree to the "),a("a",{href:"#",class:"link-deep","data-bs-toggle":"modal","data-bs-target":"#termsModal"},"Terms of Service"),c(" and "),a("a",{href:"#",class:"link-deep","data-bs-toggle":"modal","data-bs-target":"#privacyModal"},"Privacy Policy"),c(". ")],-1))]),d.value.agree?(i(),o("div",je,v(d.value.agree),1)):u("",!0)])):u("",!0),P.value?(i(),o("div",Je,[e[26]||(e[26]=a("span",null,"Please verify your email before signing in.",-1)),a("button",{class:"btn btn-sm btn-outline-warning",type:"button",disabled:b.value,onClick:K},[b.value?(i(),o("span",Xe)):u("",!0),e[25]||(e[25]=c(" Resend verification ",-1))],8,Ke)])):u("",!0),a("button",{type:"submit",class:"btn btn-brand btn-lg w-100",disabled:_.value},[_.value?(i(),o("span",ea)):u("",!0),c(" "+v(M.value.cta),1)],8,Qe),s.value==="login"?(i(),o("p",aa,[e[27]||(e[27]=c(" Don’t have an account?",-1)),e[28]||(e[28]=a("br",null,null,-1)),a("button",{class:"btn btn-link p-0 link-deep",type:"button",onClick:e[9]||(e[9]=l=>g("register"))},"Create an account")])):s.value==="register"?(i(),o("p",ta,[e[29]||(e[29]=c(" Already have an account? ",-1)),a("button",{class:"btn btn-link p-0 link-deep",type:"button",onClick:e[10]||(e[10]=l=>g("login"))},"Sign in")])):(i(),o("p",sa,[e[30]||(e[30]=c(" Remember your password?",-1)),e[31]||(e[31]=a("br",null,null,-1)),a("button",{class:"btn btn-link p-0 link-deep",type:"button",onClick:e[11]||(e[11]=l=>g("login"))},"Sign in")]))],32))])])])])])]),e[32]||(e[32]=R('<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true" data-v-45e4192f><div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable" data-v-45e4192f><div class="modal-content" data-v-45e4192f><div class="modal-header" data-v-45e4192f><h5 class="modal-title" id="termsTitle" data-v-45e4192f>Terms of Service</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-45e4192f></button></div><div class="modal-body subtitle" data-v-45e4192f><h6 data-v-45e4192f>1. Overview</h6><p data-v-45e4192f>These Terms govern your use of Touch Grass. By using the service, you agree to these Terms.</p><h6 data-v-45e4192f>2. Accounts</h6><p data-v-45e4192f>You’re responsible for the security of your account and any activity under it.</p><h6 data-v-45e4192f>3. Acceptable Use</h6><p data-v-45e4192f>No illegal activity, spam or abuse. We may suspend accounts that violate these rules.</p><h6 data-v-45e4192f>4. Liability</h6><p data-v-45e4192f>Service is provided “As-Is.” To the extent permitted by law, we’re not liable for indirect damages.</p><h6 data-v-45e4192f>5. Changes</h6><p data-v-45e4192f>We may update these Terms. Continued use signifies acceptance of the updated terms.</p></div></div></div></div><div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyTitle" aria-hidden="true" data-v-45e4192f><div class="modal-dialog modal-dialog-scrollable modal-lg modal-dialog-centered" data-v-45e4192f><div class="modal-content" data-v-45e4192f><div class="modal-header" data-v-45e4192f><h5 class="modal-title" id="privacyTitle" data-v-45e4192f>Privacy Policy</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-45e4192f></button></div><div class="modal-body subtitle" data-v-45e4192f><h6 data-v-45e4192f>What We Collect</h6><p data-v-45e4192f>Account info (name, email), usage data and device info to improve the service.</p><h6 data-v-45e4192f>How We Use Data</h6><p data-v-45e4192f>To provide features, maintain security and enhance performance and experience.</p><h6 data-v-45e4192f>Sharing</h6><p data-v-45e4192f>No selling of personal data. Limited sharing with processors under strict agreements.</p><h6 data-v-45e4192f>Security &amp; Retention</h6><p data-v-45e4192f>We use reasonable safeguards and keep data only as long as needed.</p><h6 data-v-45e4192f>Your Rights</h6><p data-v-45e4192f>Access, correct, delete or export your data where applicable by law.</p></div></div></div></div>',2))],64)}}},na=Q(la,[["__scopeId","data-v-45e4192f"]]);export{na as default};
