import{_ as Q,r as n,m as h,c as o,b as a,k as W,l as ee,p as ae,q as te,t as v,w as se,f as u,i as y,v as R,h as p,g as c,s as U,n as le,u as I,F as oe,x as ie,y as ne,z as w,A as re,B as de,e as i,C as ue,D as ce,E as ve}from"./index-C57D7_rB.js";const pe={class:"auth-shell"},be={class:"container-xl"},me={class:"device-frame rounded-5 shadow-lg mx-auto"},fe={class:"row g-0"},ge={class:"col-lg-5 brand-pane text-white"},he={class:"brand-nav"},ye={class:"brand-center text-center"},we={class:"brand-title"},ke={class:"brand-sub"},xe={class:"col-lg-7 form-pane d-flex"},_e={class:"form-wrap"},Ce={key:0,class:"field-block"},Te={class:"input-group input-group-lg has-validation"},Se={class:"invalid-feedback"},Pe={class:"field-block"},Ee={class:"input-group input-group-lg has-validation"},Me={class:"invalid-feedback"},qe={key:1,class:"field-block"},Ne={class:"form-label d-flex justify-content-between align-items-center",for:"password"},Ae={class:"input-group input-group-lg has-validation"},Ve=["type","autocomplete"],We=["aria-pressed","aria-label"],Re={class:"invalid-feedback d-block"},Ue={key:0,class:"pw-meter mt-1","aria-live":"polite"},Ie={key:2,class:"field-block"},$e={class:"input-group input-group-lg has-validation"},Be=["type"],Le=["aria-pressed","aria-label"],Ze={class:"invalid-feedback"},De={key:3,class:"field-inline"},ze={class:"form-check"},Fe={key:4,class:"field-block"},Ge={class:"form-check"},He={key:0,class:"text-danger small mt-1"},Oe={key:5,class:"alert alert-warning d-flex justify-content-between align-items-center mt-1",role:"alert"},Ye=["disabled"],je={key:0,class:"spinner-border spinner-border-sm me-1"},Xe=["disabled"],Je={key:0,class:"spinner-border spinner-border-sm me-2"},Ke={key:6,class:"text-center small mt-2"},Qe={key:7,class:"text-center small mt-2"},ea={key:8,class:"text-center small mt-2"},q=8,aa={__name:"Auth",setup(ta){const $=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,B=re(),L=de(),s=n("login"),k=n(""),r=n(""),C=n(""),x=n(""),T=n(!1),S=n(!1),b=n(!1),m=n(!1),_=n(!1),P=n(!1),f=n(!1),d=n({}),N=n(null),M=h(()=>({login:{title:"Welcome back",sub:"Sign in to continue.",cta:"Sign in"},register:{title:"Create your account",sub:"Sign up to get started.",cta:"Create account"},reset:{title:"Reset your password",sub:"We’ll email you a reset link.",cta:"Send reset link"}})[s.value]),Z={"auth/invalid-email":"Please enter a valid email.","auth/missing-password":"Enter your password.","auth/weak-password":`Use at least ${q} characters.`,"auth/email-already-in-use":"This email is already registered.","auth/user-not-found":"Incorrect email or password.","auth/wrong-password":"Incorrect email or password.","auth/invalid-credential":"Incorrect email or password.","auth/too-many-requests":"Too many attempts. Try again later.","auth/unverified-email":"Please verify your email before signing in."},A=(t,e)=>Z[t]||e||"Something went wrong. Please try again.";function V(){d.value={},P.value=!1}function D(t){let e=0;return t?(t.length>=8&&e++,(/[a-z]/.test(t)||/[A-Z]/.test(t))&&e++,/\d/.test(t)&&e++,/[^A-Za-z0-9]/.test(t)&&e++,Math.max(0,Math.min(4,e))):0}const E=h(()=>D(r.value)),z=h(()=>["Too short","Weak","Okay","Good","Strong"][E.value]),F=h(()=>["pw-weak","pw-weak","pw-ok","pw-good","pw-strong"][E.value]),G=h(()=>[0,25,50,75,100][E.value]+"%"),H=h(()=>["text-danger","text-danger","text-warning","text-success","text-success"][E.value]);function O(){k.value="",r.value="",C.value="",x.value="",T.value=!1,S.value=!1,b.value=!1,m.value=!1,_.value=!1,f.value=!1,V()}async function g(t){s.value=t,O(),await ie(),N.value?.focus()}function Y(){const t={},e=k.value.trim().toLowerCase();return e?$.test(e)||(t.email="Please enter a valid email."):t.email="Email is required.",s.value!=="reset"&&!r.value&&(t.password="Password is required."),s.value==="register"&&(x.value.trim()||(t.displayName="Name is required."),(r.value||"").length<q&&(t.password=`Use at least ${q} characters.`),r.value!==C.value&&(t.confirmPassword="Passwords do not match."),T.value||(t.agree="You must agree to the Terms.")),d.value=t,Object.keys(t).length?null:e}async function j(){V();const t=Y();if(t){_.value=!0;try{if(s.value==="login"){await ue(t,r.value,{remember:S.value}),w.success("Welcome back!");const e=(L.query.redirect||"/").toString();B.replace(e)}else if(s.value==="register")await ce(t,r.value,(x.value||"").trim()),w.success("Account created! Check your email to verify."),await g("login");else{try{await ve(t)}catch(e){if(e?.code!=="auth/user-not-found")throw e}w.info("If that email exists, a reset link was sent."),await g("login")}}catch(e){e?.code==="auth/unverified-email"?P.value=!0:w.error(A(e.code,e.message))}finally{_.value=!1}}}async function X(){if(!f.value){f.value=!0;try{const t=(k.value||"").trim().toLowerCase();await ne(t,r.value),w.success("Verification email resent. Please check your inbox."),P.value=!1}catch(t){w.error(A(t.code,t.message))}finally{f.value=!1}}}const J=()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})};return(t,e)=>{const K=te("router-link");return i(),o(oe,null,[a("section",pe,[a("div",be,[a("div",me,[a("div",fe,[a("aside",ge,[a("div",he,[ee(K,{to:"/",class:"btn-ghost-light"},{default:ae(()=>[...e[12]||(e[12]=[a("i",{class:"bi bi-arrow-left me-1"},null,-1),c(" Back home ",-1)])]),_:1})]),a("div",ye,[e[13]||(e[13]=W('<div class="brand-header" data-v-324aacb7><svg class="brand-logo" viewBox="0 0 64 64" aria-hidden="true" data-v-324aacb7><rect x="0" y="44" width="64" height="6" data-v-324aacb7></rect><path d="M8 44 q2-10 6-16 q-2 8 2 16 Z" data-v-324aacb7></path><path d="M16 44 q2-12 8-20 q-3 10 1 20 Z" data-v-324aacb7></path><path d="M24 44 q3-14 10-24 q-4 12 0 24 Z" data-v-324aacb7></path><path d="M32 44 q2-12 8-20 q-3 10 0 20 Z" data-v-324aacb7></path><path d="M40 44 q3-14 10-24 q-4 12 0 24 Z" data-v-324aacb7></path><path d="M48 44 q2-10 6-16 q-2 8 2 16 Z" data-v-324aacb7></path></svg><div class="brand-name" data-v-324aacb7>Touch Grass</div></div><div class="brand-divider" data-v-324aacb7></div>',2)),a("h2",we,v(M.value.title),1),a("p",ke,v(M.value.sub),1),e[14]||(e[14]=a("p",{class:"brand-tag"},"Step outside for a minute—fresh air helps.",-1))])]),a("main",xe,[a("div",_e,[(i(),o("form",{onSubmit:se(j,["prevent"]),class:"form-stack",novalidate:"",key:s.value},[s.value==="register"?(i(),o("div",Ce,[e[16]||(e[16]=a("label",{class:"form-label",for:"displayName"},"Name *",-1)),a("div",Te,[e[15]||(e[15]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-person"})],-1)),y(a("input",{id:"displayName","onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),type:"text",class:p(["form-control","tg-input",{"is-invalid":d.value.displayName}]),placeholder:"Your name",autocomplete:"name"},null,2),[[R,x.value,void 0,{trim:!0}]]),a("div",Se,v(d.value.displayName),1)])])):u("",!0),a("div",Pe,[e[18]||(e[18]=a("label",{class:"form-label",for:"email"},"Email Address *",-1)),a("div",Ee,[e[17]||(e[17]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-envelope"})],-1)),y(a("input",{id:"email",ref_key:"emailEl",ref:N,"onUpdate:modelValue":e[1]||(e[1]=l=>k.value=l),type:"email",class:p(["form-control","tg-input",{"is-invalid":d.value.email}]),placeholder:"you@example.com",autocomplete:"username"},null,2),[[R,k.value,void 0,{trim:!0}]]),a("div",Me,v(d.value.email),1)])]),s.value!=="reset"?(i(),o("div",qe,[a("label",Ne,[e[19]||(e[19]=c(" Password * ",-1)),s.value==="register"&&r.value?(i(),o("small",{key:0,class:p(["fw-semibold",H.value])}," Strength: "+v(z.value),3)):u("",!0)]),a("div",Ae,[e[20]||(e[20]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-lock"})],-1)),y(a("input",{id:"password",type:b.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=l=>r.value=l),class:p(["form-control","tg-input",{"is-invalid":d.value.password}]),autocomplete:s.value==="register"?"new-password":"current-password",placeholder:"Enter password"},null,10,Ve),[[U,r.value]]),a("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[3]||(e[3]=l=>b.value=!b.value),"aria-pressed":b.value,"aria-label":b.value?"Hide password":"Show password"},[a("i",{class:p(["bi",b.value?"bi-eye-slash":"bi-eye"])},null,2)],8,We),a("div",Re,v(d.value.password),1)]),s.value==="register"&&r.value?(i(),o("div",Ue,[a("div",{class:p(["pw-bar",F.value]),style:le({width:G.value})},null,6)])):u("",!0)])):u("",!0),s.value==="register"?(i(),o("div",Ie,[e[22]||(e[22]=a("label",{class:"form-label",for:"confirm"},"Confirm Password *",-1)),a("div",$e,[e[21]||(e[21]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-shield-lock"})],-1)),y(a("input",{id:"confirm",type:m.value?"text":"password","onUpdate:modelValue":e[4]||(e[4]=l=>C.value=l),class:p(["form-control","tg-input",{"is-invalid":d.value.confirmPassword}]),placeholder:"Re-enter password",autocomplete:"new-password"},null,10,Be),[[U,C.value]]),a("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[5]||(e[5]=l=>m.value=!m.value),"aria-pressed":m.value,"aria-label":m.value?"Hide confirm password":"Show confirm password"},[a("i",{class:p(["bi",m.value?"bi-eye-slash":"bi-eye"])},null,2)],8,Le),a("div",Ze,v(d.value.confirmPassword),1)])])):u("",!0),s.value==="login"?(i(),o("div",De,[a("div",ze,[y(a("input",{class:"form-check-input",type:"checkbox",id:"remember","onUpdate:modelValue":e[6]||(e[6]=l=>S.value=l)},null,512),[[I,S.value]]),e[23]||(e[23]=a("label",{class:"form-check-label",for:"remember"},"Remember me",-1))]),a("button",{class:"btn btn-link p-0 small link-deep",type:"button",onClick:e[7]||(e[7]=l=>g("reset"))}," Forgot password? ")])):u("",!0),s.value==="register"?(i(),o("div",Fe,[a("div",Ge,[y(a("input",{class:"form-check-input",type:"checkbox",id:"agree","onUpdate:modelValue":e[8]||(e[8]=l=>T.value=l)},null,512),[[I,T.value]]),e[24]||(e[24]=a("label",{class:"form-check-label",for:"agree"},[c(" I agree to the "),a("a",{href:"#",class:"link-deep","data-bs-toggle":"modal","data-bs-target":"#termsModal"},"Terms of Service"),c(" and "),a("a",{href:"#",class:"link-deep","data-bs-toggle":"modal","data-bs-target":"#privacyModal"},"Privacy Policy"),c(". ")],-1))]),d.value.agree?(i(),o("div",He,v(d.value.agree),1)):u("",!0)])):u("",!0),P.value?(i(),o("div",Oe,[e[26]||(e[26]=a("span",null,"Please verify your email before signing in.",-1)),a("button",{class:"btn btn-sm btn-outline-warning",type:"button",disabled:f.value,onClick:X},[f.value?(i(),o("span",je)):u("",!0),e[25]||(e[25]=c(" Resend verification ",-1))],8,Ye)])):u("",!0),a("button",{type:"submit",class:"btn btn-brand btn-lg w-100",disabled:_.value},[_.value?(i(),o("span",Je)):u("",!0),c(" "+v(M.value.cta),1)],8,Xe),s.value==="login"?(i(),o("p",Ke,[e[27]||(e[27]=c(" Don’t have an account? ",-1)),a("button",{class:"btn btn-link p-0 link-deep",type:"button",onClick:e[9]||(e[9]=l=>g("register"))},"Create an account")])):s.value==="register"?(i(),o("p",Qe,[e[28]||(e[28]=c(" Already have an account? ",-1)),a("button",{class:"btn btn-link p-0 link-deep",type:"button",onClick:e[10]||(e[10]=l=>g("login"))},"Sign in")])):(i(),o("p",ea,[e[29]||(e[29]=c(" Remember your password? ",-1)),a("button",{class:"btn btn-link p-0 link-deep",type:"button",onClick:e[11]||(e[11]=l=>g("login"))},"Sign in")]))],32))])])])])]),a("button",{type:"button",class:"btn btn-top","aria-label":"Back to top",onClick:J},[...e[30]||(e[30]=[a("i",{class:"bi bi-arrow-up"},null,-1)])])]),e[31]||(e[31]=W('<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true" data-v-324aacb7><div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable" data-v-324aacb7><div class="modal-content" data-v-324aacb7><div class="modal-header" data-v-324aacb7><h5 class="modal-title" id="termsTitle" data-v-324aacb7>Terms of Service</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-324aacb7></button></div><div class="modal-body subtitle" data-v-324aacb7><h6 data-v-324aacb7>1. Overview</h6><p data-v-324aacb7>These Terms govern your use of Touch Grass. By using the service, you agree to these Terms.</p><h6 data-v-324aacb7>2. Accounts</h6><p data-v-324aacb7>You’re responsible for the security of your account and any activity under it.</p><h6 data-v-324aacb7>3. Acceptable Use</h6><p data-v-324aacb7>No illegal activity, spam or abuse. We may suspend accounts that violate these rules.</p><h6 data-v-324aacb7>4. Liability</h6><p data-v-324aacb7>Service is provided “As-Is.” To the extent permitted by law, we’re not liable for indirect damages.</p><h6 data-v-324aacb7>5. Changes</h6><p data-v-324aacb7>We may update these Terms. Continued use signifies acceptance of the updated terms.</p></div></div></div></div><div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyTitle" aria-hidden="true" data-v-324aacb7><div class="modal-dialog modal-dialog-scrollable modal-lg modal-dialog-centered" data-v-324aacb7><div class="modal-content" data-v-324aacb7><div class="modal-header" data-v-324aacb7><h5 class="modal-title" id="privacyTitle" data-v-324aacb7>Privacy Policy</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-324aacb7></button></div><div class="modal-body subtitle" data-v-324aacb7><h6 data-v-324aacb7>What We Collect</h6><p data-v-324aacb7>Account info (name, email), usage data and device info to improve the service.</p><h6 data-v-324aacb7>How We Use Data</h6><p data-v-324aacb7>To provide features, maintain security and enhance performance and experience.</p><h6 data-v-324aacb7>Sharing</h6><p data-v-324aacb7>No selling of personal data. Limited sharing with processors under strict agreements.</p><h6 data-v-324aacb7>Security &amp; Retention</h6><p data-v-324aacb7>We use reasonable safeguards and keep data only as long as needed.</p><h6 data-v-324aacb7>Your Rights</h6><p data-v-324aacb7>Access, correct, delete or export your data where applicable by law.</p></div></div></div></div>',2))],64)}}},la=Q(aa,[["__scopeId","data-v-324aacb7"]]);export{la as default};
