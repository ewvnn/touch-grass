import{_ as K,r as n,m as f,c as o,b as a,k as N,l as Q,p as ee,q as ae,t as v,w as te,f as d,i as g,v as R,h as p,g as c,s as U,n as se,u as I,F as le,x as oe,y as ie,z as h,A as ne,B as re,e as i,C as de,D as ue,E as ce}from"./index-BqexOtNu.js";const ve={class:"auth-shell"},pe={class:"container-xl"},me={class:"device-frame rounded-5 shadow-lg mx-auto"},be={class:"row g-0"},fe={class:"col-lg-5 brand-pane text-white"},ge={class:"brand-nav"},he={class:"brand-center text-center"},ye={class:"brand-title"},we={class:"brand-sub"},ke={class:"col-lg-7 form-pane d-flex"},xe={class:"form-wrap"},_e={key:0,class:"field-block"},Ce={class:"input-group input-group-lg"},Te={class:"field-block"},Se={class:"input-group input-group-lg has-validation"},Pe={class:"invalid-feedback"},Ee={key:1,class:"field-block"},Me={class:"form-label d-flex justify-content-between align-items-center",for:"password"},qe={class:"input-group input-group-lg has-validation"},Ae=["type","autocomplete"],Ve=["aria-pressed","aria-label"],We={class:"invalid-feedback d-block"},Ne={key:0,class:"pw-meter mt-1","aria-live":"polite"},Re={key:2,class:"field-block"},Ue={class:"input-group input-group-lg has-validation"},Ie=["type"],$e=["aria-pressed","aria-label"],Be={class:"invalid-feedback"},Le={key:3,class:"field-inline"},Ze={class:"form-check"},De={key:4,class:"field-block"},ze={class:"form-check"},Ge={key:0,class:"text-danger small mt-1"},He={key:5,class:"alert alert-warning d-flex justify-content-between align-items-center mt-1",role:"alert"},Oe=["disabled"],Ye={key:0,class:"spinner-border spinner-border-sm me-1"},je=["disabled"],Fe={key:0,class:"spinner-border spinner-border-sm me-2"},Xe={key:6,class:"text-center small mt-2"},Je={key:7,class:"text-center small mt-2"},Ke={key:8,class:"text-center small mt-2"},q=8,Qe={__name:"Auth",setup(ea){const $=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,B=ne(),L=re(),s=n("login"),k=n(""),r=n(""),x=n(""),P=n(""),_=n(!1),E=n(!1),m=n(!1),b=n(!1),C=n(!1),T=n(!1),y=n(!1),u=n({}),A=n(null),M=f(()=>({login:{title:"Welcome back",sub:"Sign in to continue.",cta:"Sign in"},register:{title:"Create your account",sub:"Sign up to get started.",cta:"Create account"},reset:{title:"Reset your password",sub:"We’ll email you a reset link.",cta:"Send reset link"}})[s.value]),Z={"auth/invalid-email":"Please enter a valid email.","auth/missing-password":"Enter your password.","auth/weak-password":`Use at least ${q} characters.`,"auth/email-already-in-use":"This email is already registered.","auth/user-not-found":"Incorrect email or password.","auth/wrong-password":"Incorrect email or password.","auth/invalid-credential":"Incorrect email or password.","auth/too-many-requests":"Too many attempts. Try again later.","auth/unverified-email":"Please verify your email before signing in."},V=(t,e)=>Z[t]||e||"Something went wrong. Please try again.";function W(){u.value={},T.value=!1}function D(t){let e=0;return t?(t.length>=8&&e++,(/[a-z]/.test(t)||/[A-Z]/.test(t))&&e++,/\d/.test(t)&&e++,/[^A-Za-z0-9]/.test(t)&&e++,Math.max(0,Math.min(4,e))):0}const S=f(()=>D(r.value)),z=f(()=>["Too short","Weak","Okay","Good","Strong"][S.value]),G=f(()=>["pw-weak","pw-weak","pw-ok","pw-good","pw-strong"][S.value]),H=f(()=>[0,25,50,75,100][S.value]+"%"),O=f(()=>["text-danger","text-danger","text-warning","text-success","text-success"][S.value]);async function w(t){s.value=t,W(),t!=="register"&&(_.value=!1),t==="reset"&&(r.value="",x.value=""),await oe(),A.value?.focus()}function Y(){const t={},e=k.value.trim().toLowerCase();return e?$.test(e)||(t.email="Please enter a valid email."):t.email="Email is required.",s.value!=="reset"&&!r.value&&(t.password="Password is required."),s.value==="register"&&((r.value||"").length<q&&(t.password=`Use at least ${q} characters.`),r.value!==x.value&&(t.confirmPassword="Passwords do not match."),_.value||(t.agree="You must agree to the Terms.")),u.value=t,Object.keys(t).length?null:e}async function j(){W();const t=Y();if(t){C.value=!0;try{if(s.value==="login"){await de(t,r.value,{remember:E.value}),h.success("Welcome back!");const e=(L.query.redirect||"/").toString();B.replace(e)}else if(s.value==="register")await ue(t,r.value,(P.value||"").trim()),h.success("Account created! Check your email to verify."),await w("login");else{try{await ce(t)}catch(e){if(e?.code!=="auth/user-not-found")throw e}h.info("If that email exists, a reset link was sent."),s.value="login"}}catch(e){e?.code==="auth/unverified-email"?T.value=!0:h.error(V(e.code,e.message))}finally{C.value=!1}}}async function F(){if(!y.value){y.value=!0;try{const t=(k.value||"").trim().toLowerCase();await ie(t,r.value),h.success("Verification email resent. Please check your inbox."),T.value=!1}catch(t){h.error(V(t.code,t.message))}finally{y.value=!1}}}const X=()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})};return(t,e)=>{const J=ae("router-link");return i(),o(le,null,[a("section",ve,[a("div",pe,[a("div",me,[a("div",be,[a("aside",fe,[a("div",ge,[Q(J,{to:"/",class:"btn-ghost-light"},{default:ee(()=>[...e[12]||(e[12]=[a("i",{class:"bi bi-arrow-left me-1"},null,-1),c(" Back home ",-1)])]),_:1})]),a("div",he,[e[13]||(e[13]=N('<div class="brand-header" data-v-011e323a><svg class="brand-logo" viewBox="0 0 64 64" aria-hidden="true" data-v-011e323a><rect x="0" y="44" width="64" height="6" data-v-011e323a></rect><path d="M8 44 q2-10 6-16 q-2 8 2 16 Z" data-v-011e323a></path><path d="M16 44 q2-12 8-20 q-3 10 1 20 Z" data-v-011e323a></path><path d="M24 44 q3-14 10-24 q-4 12 0 24 Z" data-v-011e323a></path><path d="M32 44 q2-12 8-20 q-3 10 0 20 Z" data-v-011e323a></path><path d="M40 44 q3-14 10-24 q-4 12 0 24 Z" data-v-011e323a></path><path d="M48 44 q2-10 6-16 q-2 8 2 16 Z" data-v-011e323a></path></svg><div class="brand-name" data-v-011e323a>Touch Grass</div></div><div class="brand-divider" data-v-011e323a></div>',2)),a("h2",ye,v(M.value.title),1),a("p",we,v(M.value.sub),1),e[14]||(e[14]=a("p",{class:"brand-tag"},"Step outside for a minute—fresh air helps.",-1))])]),a("main",ke,[a("div",xe,[a("form",{onSubmit:te(j,["prevent"]),class:"form-stack",novalidate:""},[s.value==="register"?(i(),o("div",_e,[e[16]||(e[16]=a("label",{class:"form-label",for:"displayName"},"Name",-1)),a("div",Ce,[e[15]||(e[15]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-person"})],-1)),g(a("input",{id:"displayName","onUpdate:modelValue":e[0]||(e[0]=l=>P.value=l),type:"text",class:"form-control tg-input",placeholder:"Your name",autocomplete:"name"},null,512),[[R,P.value,void 0,{trim:!0}]])])])):d("",!0),a("div",Te,[e[18]||(e[18]=a("label",{class:"form-label",for:"email"},"Email Address *",-1)),a("div",Se,[e[17]||(e[17]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-envelope"})],-1)),g(a("input",{id:"email",ref_key:"emailEl",ref:A,"onUpdate:modelValue":e[1]||(e[1]=l=>k.value=l),type:"email",class:p(["form-control","tg-input",{"is-invalid":u.value.email}]),placeholder:"you@example.com",autocomplete:"username"},null,2),[[R,k.value,void 0,{trim:!0}]]),a("div",Pe,v(u.value.email),1)])]),s.value!=="reset"?(i(),o("div",Ee,[a("label",Me,[e[19]||(e[19]=c(" Password * ",-1)),s.value==="register"&&r.value?(i(),o("small",{key:0,class:p(["fw-semibold",O.value])}," Strength: "+v(z.value),3)):d("",!0)]),a("div",qe,[e[20]||(e[20]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-lock"})],-1)),g(a("input",{id:"password",type:m.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=l=>r.value=l),class:p(["form-control","tg-input",{"is-invalid":u.value.password}]),autocomplete:s.value==="register"?"new-password":"current-password",placeholder:"Enter password"},null,10,Ae),[[U,r.value]]),a("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[3]||(e[3]=l=>m.value=!m.value),"aria-pressed":m.value,"aria-label":m.value?"Hide password":"Show password"},[a("i",{class:p(["bi",m.value?"bi-eye-slash":"bi-eye"])},null,2)],8,Ve),a("div",We,v(u.value.password),1)]),s.value==="register"&&r.value?(i(),o("div",Ne,[a("div",{class:p(["pw-bar",G.value]),style:se({width:H.value})},null,6)])):d("",!0)])):d("",!0),s.value==="register"?(i(),o("div",Re,[e[22]||(e[22]=a("label",{class:"form-label",for:"confirm"},"Confirm Password *",-1)),a("div",Ue,[e[21]||(e[21]=a("span",{class:"input-group-text"},[a("i",{class:"bi bi-shield-lock"})],-1)),g(a("input",{id:"confirm",type:b.value?"text":"password","onUpdate:modelValue":e[4]||(e[4]=l=>x.value=l),class:p(["form-control","tg-input",{"is-invalid":u.value.confirmPassword}]),placeholder:"Re-enter password",autocomplete:"new-password"},null,10,Ie),[[U,x.value]]),a("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[5]||(e[5]=l=>b.value=!b.value),"aria-pressed":b.value,"aria-label":b.value?"Hide confirm password":"Show confirm password"},[a("i",{class:p(["bi",b.value?"bi-eye-slash":"bi-eye"])},null,2)],8,$e),a("div",Be,v(u.value.confirmPassword),1)])])):d("",!0),s.value==="login"?(i(),o("div",Le,[a("div",Ze,[g(a("input",{class:"form-check-input",type:"checkbox",id:"remember","onUpdate:modelValue":e[6]||(e[6]=l=>E.value=l)},null,512),[[I,E.value]]),e[23]||(e[23]=a("label",{class:"form-check-label",for:"remember"},"Remember me",-1))]),a("button",{class:"btn btn-link p-0 small link-deep",type:"button",onClick:e[7]||(e[7]=l=>w("reset"))}," Forgot password? ")])):d("",!0),s.value==="register"?(i(),o("div",De,[a("div",ze,[g(a("input",{class:"form-check-input",type:"checkbox",id:"agree","onUpdate:modelValue":e[8]||(e[8]=l=>_.value=l)},null,512),[[I,_.value]]),e[24]||(e[24]=a("label",{class:"form-check-label",for:"agree"},[c(" I agree to the "),a("a",{href:"#",class:"link-deep","data-bs-toggle":"modal","data-bs-target":"#termsModal"},"Terms of Service"),c(" and "),a("a",{href:"#",class:"link-deep","data-bs-toggle":"modal","data-bs-target":"#privacyModal"},"Privacy Policy"),c(". ")],-1))]),u.value.agree?(i(),o("div",Ge,v(u.value.agree),1)):d("",!0)])):d("",!0),T.value?(i(),o("div",He,[e[26]||(e[26]=a("span",null,"Please verify your email before signing in.",-1)),a("button",{class:"btn btn-sm btn-outline-warning",type:"button",disabled:y.value,onClick:F},[y.value?(i(),o("span",Ye)):d("",!0),e[25]||(e[25]=c(" Resend verification ",-1))],8,Oe)])):d("",!0),a("button",{type:"submit",class:"btn btn-brand btn-lg w-100",disabled:C.value},[C.value?(i(),o("span",Fe)):d("",!0),c(" "+v(M.value.cta),1)],8,je),s.value==="login"?(i(),o("p",Xe,[e[27]||(e[27]=c(" Don’t have an account? ",-1)),a("button",{class:"btn btn-link p-0 link-deep",type:"button",onClick:e[9]||(e[9]=l=>w("register"))},"Create an account")])):s.value==="register"?(i(),o("p",Je,[e[28]||(e[28]=c(" Already have an account? ",-1)),a("button",{class:"btn btn-link p-0 link-deep",type:"button",onClick:e[10]||(e[10]=l=>w("login"))},"Sign in")])):(i(),o("p",Ke,[e[29]||(e[29]=c(" Remember your password? ",-1)),a("button",{class:"btn btn-link p-0 link-deep",type:"button",onClick:e[11]||(e[11]=l=>w("login"))},"Sign in")]))],32)])])])])]),a("button",{type:"button",class:"btn btn-top","aria-label":"Back to top",onClick:X},[...e[30]||(e[30]=[a("i",{class:"bi bi-arrow-up"},null,-1)])])]),e[31]||(e[31]=N('<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true" data-v-011e323a><div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable" data-v-011e323a><div class="modal-content" data-v-011e323a><div class="modal-header" data-v-011e323a><h5 class="modal-title" id="termsTitle" data-v-011e323a>Terms of Service</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-011e323a></button></div><div class="modal-body subtitle" data-v-011e323a><h6 data-v-011e323a>1. Overview</h6><p data-v-011e323a>These Terms govern your use of Touch Grass. By using the service, you agree to these Terms.</p><h6 data-v-011e323a>2. Accounts</h6><p data-v-011e323a>You’re responsible for the security of your account and any activity under it.</p><h6 data-v-011e323a>3. Acceptable Use</h6><p data-v-011e323a>No illegal activity, spam or abuse. We may suspend accounts that violate these rules.</p><h6 data-v-011e323a>4. Liability</h6><p data-v-011e323a>Service is provided “As-Is.” To the extent permitted by law, we’re not liable for indirect damages.</p><h6 data-v-011e323a>5. Changes</h6><p data-v-011e323a>We may update these Terms. Continued use signifies acceptance of the updated terms.</p></div></div></div></div><div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyTitle" aria-hidden="true" data-v-011e323a><div class="modal-dialog modal-dialog-scrollable modal-lg modal-dialog-centered" data-v-011e323a><div class="modal-content" data-v-011e323a><div class="modal-header" data-v-011e323a><h5 class="modal-title" id="privacyTitle" data-v-011e323a>Privacy Policy</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-011e323a></button></div><div class="modal-body subtitle" data-v-011e323a><h6 data-v-011e323a>What We Collect</h6><p data-v-011e323a>Account info (name, email), usage data and device info to improve the service.</p><h6 data-v-011e323a>How We Use Data</h6><p data-v-011e323a>To provide features, maintain security and enhance performance and experience.</p><h6 data-v-011e323a>Sharing</h6><p data-v-011e323a>No selling of personal data. Limited sharing with processors under strict agreements.</p><h6 data-v-011e323a>Security &amp; Retention</h6><p data-v-011e323a>We use reasonable safeguards and keep data only as long as needed.</p><h6 data-v-011e323a>Your Rights</h6><p data-v-011e323a>Access, correct, delete or export your data where applicable by law.</p></div></div></div></div>',2))],64)}}},ta=K(Qe,[["__scopeId","data-v-011e323a"]]);export{ta as default};
